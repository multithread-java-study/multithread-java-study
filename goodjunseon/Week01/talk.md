# 1주차: 프로세스와 스레드 소개

### 발표 간단 요약
프로세스 : 자원 할당 단위  
스레드 : 작업 단위

프로세스
- 자원 할당 단위
- 각 프로세스는 독립적
- IPC 통신
- 문맥 교환 오버헤드 큼
- 메모리 낭비 심함

쓰레드
- 작업 단위
- 같은 프로세스 내 스레드 간 자원 공유
- 통신 및 문맥 교환 오버헤드 적음
- 메모리 낭비 적음
- 동기화 문제 발생 가능

> ### 프로세스
> - **프로세스**란 **프로세서**에 의해 실행되는 **프로그램**


### *프로그램과 프로세스를 구분하자.*

**`프로그램`이란 컴퓨터가 수행할 작업을 지시하는 명령어들의 집합이다.**   
즉, 우리가 작성한 코드 파일이라고 생각할 수 있다.  
예를들면, .java 확장자를 가진 파일이 프로그램이다.  
프로그램 파일은 하드디스크에 저장되어 있는 상태이다.

그렇다면 프로세스란 무엇일까?   
**`프로세스`란 실행 중인 프로그램을 의미한다.**  
즉,하드디스크에 저장되어있는 `프로그램`이 메모리에 적재되어 CPU에 의해 실행되고 있는 상태를 `프로세스`라고 한다.  
프로세스는 실행 중인 프로그램이기 때문에 메모리에 적재되어 있어야 한다.)

**따라서, 하나의 프로그램이 여러 개의 프로세스를 가질 수 있다.**

> *"자바 언어로 비유를 하자면 클래스는 프로그램이고, 인스턴스는 프로세스이다."* - 김영한

예를 들어, `Hello.java`라는 프로그램이 있다고 하자.  
이 프로그램을 컴파일하면 `Hello.class`라는 바이트코드 파일이 생성된다.  
이 바이트코드 파일을 자바 가상 머신(JVM)이 실행하면 `Hello`라는 프로세스가 생성된다.  
만약, `Hello.java` 프로그램을 두 번 실행하면 `Hello`라는 이름의 프로세스가 두 개 생성된다.  
즉, 하나의 프로그램이 여러 개의 프로세스를 가질 수 있다.

### 프로그램(하드디스크) -> 프로세서(CPU)가 실행  -> 프로세스(메모리)   

"즉 CPU가 프로그램을 실행하면 프로세스가 된다."
CPU는 한번에 하나의 프로세스만 실행한다.  
그러면 우리는 여러 프로그램을 어떻게 동시에 실행할 수 있을까?

CPU는 여러 프로세스를 굉장히 짧은 간격으로 번갈아가며 실행한다.  
이것을 문맥 교환(context switching)이라고 한다.
문맥 교환 시 CPU는 이전 프로세스 상태를 저장하고 새로운 프로세스 상태를 복원한다.  
이때 프로세스의 상태를 저장한느 곳을 PCB(Process Control Block)라고 한다.
PCB에는 Pointer, Process State, Process Number(PID), Program Counter, CPU Register, Memory Limits 등등이 있다.  

프로세스의 구조
Code, Data, Heap, Stack 영역이 있다.

- Code : 컴파일된 소스코드가 저장되는 영역
- Data : 전역변수, static 변수가 저장되는 영역
- Heap : 동적으로 생성되는 데이터가 저장되는 영역
- Stack : 함수 호출 시 생성되는 지역변수가 저장되는 영역

멀티 프로세스의 단점은 메모리 낭비가 심하며, 프로세스 간의 통신이 어렵다는 것이다(IPC통신이 요구됨).


그래서 발전된게 멀티 스레드이다.

스레드는 작업의 단위이며, 프로세스 내에 존재한다.
그렇기 때문에 스레드는 프로세스의 자원을 공유한다. 즉, 같은 프로세스 내의 각각의 스레드는 같은 Code, Data, Heap 영역을 공유한다.
이는 메모리 낭비를 줄이고, 스레드 간의 통신이 용이하다는 장점이 있다.
하지만, 스레드는 Stack 영역을 공유하지 않는다. 각각의 스레드는 독립적인 Stack 영역을 가진다.
Stack 영역은 함수 호출 시 생성되는 지역변수가 저장되는 영역이기 때문에, 스레드마다 독립적인 Stack 영역을 가져야 한다.
따라서, 멀티 스레드는 메모리 낭비를 줄이고, 스레드 간의 통신이 용이하다는 장점이 있지만, 스레드 간의 동기화 문제가 발생할 수 있다.
스레드 간의 동기화 문제는 여러 스레드가 동시에 같은 자원에 접근할 때 발생한다.
이를 해결하기 위해 동기화(synchronization) 기법이 필요하다. 이 내용은 나중에 다루는 것 같다.