# 프로세스와 스레드 소개 (세션 2)

## 멀티 태스킹

- CPU가 매우 빠른 속도로 프로그램 코드(스레드)를 변경(문맥 교환)하여
사람이 느낄 때의 동시에 실행된다고 생각되게 한다.
- 각 프로그램의 실행 시간을 분할해서 
동시에 실행되는 것 처럼 하는 기법을 `Time Sharing(시분할)` 기법이라 한다.

---

## 멀티 프로세싱
- CPU 코어가 물리적으로 2개 이상이라 2가지가 동시에 실행 가능한 것이다.

### 멀티태스킹 vs 멀티프로세싱
- **멀티태스킹**은 **운영체제 소프트웨어의 관점** : 단일 코어를 운영체제의 스케줄링 등을 이용하여 멀티 코어 처럼 사용자가 느끼게 한다.
- **멀티프로세싱**은 **하드웨어 장비의 관점** : 물리적인 코어가 많아 다양한 프로그램을 동시에 실행 가능하다.

## 프로세스와 스레드
프로세스란 운영체제 안에서 실제 실행중인 프로그램을 부르는 명칭이다.

### 프로세스의 메모리 구성
- 코드 세션: 프로그램의 코드가 저장되는 부분
- 데이터 세션: 전역 변수 및 정적 변수와 같은 변화가 적은 **읽기 전용 데이터** 저장
- 힙: 인스턴스/버퍼 등이 동적으로 할당
- 스택: 메서드 호출 시 생성되는 지역변수, 반환주소 등 저장(**스레드 마다 별도**)

---
## 스레드
프로세스에 하나 이상 무조건 필요한다.
스레드는 코드를 한줄 한줄 내려며 프로그램을 실행 시킨다.
- 한 프로세스가 여러 스레드를 갖는 경우 메모리 공간을 공유하는 공간도 존재한다.
  - 공유 메모리: 같은 프로세스 내의 스레드는 같은 코드 세션, 데이터 세션 등을 공유한다.
  - 각 스레드는 고유한 자신의 스택을 갖는다.

### 스케줄링(멀티 코어 스케줄링)
멀티 코어 스케줄링은 단일 코어 스케줄링와 달리 동시에 더 많은 스레드를 물리적으로 실행 가능하다.

### 용어 정리
- 멀태태스킹이란 단일 코어에서 문맥 교환을 통해 여러 작업을 수행하는 것
- 스케줄링은 CPU 시간을 여러 작업에 나눠 배정하는 방법
- 프로세스란 실행중인 프로그램의 인스턴스 -> 운영체제는 각 프로세스를 별도로 취급한다.
- 스레드는 프로세스 내부에 실행 되는 작은 단위로 cpu를 통해 실제 실행된다.

# 컨텍스트 스위칭 (문맥 교환)

### 문맥 교환의 오버헤드
- 문맥 교환시에는 이전의 작업을 어디까지 진행했는지, 관련 데이터를 이전 실행 상태를 기억해야 한다.
  1. 관련 데이터를 메모리에 올린다.
  2. 다른 스레드를 실행 시킨다.
  3. 1번에서 저장한 데이터를 다시 읽어온다.

-> 잦은 문맥 교환은 비효율을 불러 올 수 있다. 하지만 IO처리 등 CPU가 대기만 하는 경우 존재
-> 대부분의 상황에서 코어의 수 보다 스레드의 수가 많은 것이 효율적이다. (너무 많으면 문맥만 교환해서 비효율)

